import uuid

def generate_insert_sql(data):
    """
    ç”Ÿæˆ SQL INSERT è¯­å¥
    :param data: åŒ…å«æ‰€æœ‰å­—æ®µå€¼çš„å­—å…¸
    :return: æ ¼å¼åŒ–çš„ SQL INSERT è¯­å¥
    """
    fields = [
        'seq',
        'app_id',
        'maxkb_id',
        'name',
        'icon',
        'api_type',
        'base_api',
        'redirect_link',
        'token',
        'category',
        '`desc`',
        'prologue',
        'enabled',
        'visible',
        'main_app'
    ]
    
    # æ„å»º INSERT è¯­å¥çš„å­—æ®µéƒ¨åˆ†
    fields_str = ',\n    '.join(fields)
    
    # è·å–å€¼
    values = []
    for field in fields:
        val = data.get(field.strip('`'))  # ç§»é™¤å­—æ®µåçš„åå¼•å·ä»¥è·å–æ­£ç¡®çš„å€¼
        if val is None:
            if field in ['visible', 'main_app']:
                values.append('1')  # ä¸ºvisibleå’Œmain_appè®¾ç½®é»˜è®¤å€¼1
            else:
                values.append('NULL')
        elif field == 'app_id':
            values.append(f"uuid()")
        elif isinstance(val, (int, float)):
            values.append(str(val))
        else:
            # å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬ä¹‰å’Œå¼•å·å¤„ç†
            val = str(val).replace("'", "''")
            values.append(f"'{val}'")
    
    # æ„å»º VALUES éƒ¨åˆ†
    values_str = ',\n    '.join(values)
    
    # ç»„è£…å®Œæ•´çš„ SQL è¯­å¥
    sql = f"""INSERT INTO application (
    {fields_str}
) VALUES (
    {values_str}
);"""
    
    return sql

# ç¤ºä¾‹æ•°æ®
sample_data = {
    'seq': 3003,
    'app_id': None,  # å°†ä½¿ç”¨ uuid() å‡½æ•°
    'maxkb_id': None,
    'name': 'ç”µè·¯ç†è®º',
    'icon': 11,
    'api_type': 'dify/chatflow',
    'base_api': 'http://10.119.14.166/v1/',
    'redirect_link': None,
    'token': 'app-0Dpb8f5NbsfvQAUbWWborU8a',
    'category': 'AI è¯¾ç¨‹/æˆ‘çš„è¯¾ç¨‹/ç”µè·¯ç†è®º/AIå­¦ä¼´',
    'desc': 'æˆè¯¾æ•™å¸ˆï¼šå¼ å³°',
    'prologue': '''æ¬¢è¿æ¥åˆ°ã€Šç”µè·¯ç†è®ºã€‹è¯¾ç¨‹ï½æˆ‘æ˜¯ä½ çš„ AI æ·±åº¦æ€è€ƒ åŠ©æ•™ğŸ”¹

åœ¨è¿™é—¨è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢ç”µè·¯ä¸–ç•Œçš„å¥¥ç§˜ï¼Œè§£ç­”é‚£äº›çœ‹ä¼¼ç®€å•å´è•´å«æ·±åˆ»åŸç†çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½ å¯èƒ½ä¼šåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„æœ‰è¶£é—®é¢˜ï¼š

- ä¸ºä»€ä¹ˆä¸€ä¸ªç®€å•çš„ç”µé˜»ã€ç”µå®¹å’Œç”µæ„Ÿå¯ä»¥ç»„åˆå‡ºå¦‚æ­¤å¤æ‚çš„ç”µè·¯è¡Œä¸ºï¼Ÿ
- ä»€ä¹ˆæ˜¯"ç¬æ€å“åº”"å’Œ"ç¨³æ€å“åº”"ï¼Œå®ƒä»¬å¦‚ä½•å†³å®šç”µè·¯çš„å·¥ä½œç‰¹æ€§ï¼Ÿ
- æ­£å¼¦ç¨³æ€åˆ†æä¸­çš„"ç›¸é‡æ³•"æ˜¯å¦‚ä½•ç®€åŒ–å¤æ‚å¾®åˆ†æ–¹ç¨‹çš„ï¼Ÿ
- ä¸ºä»€ä¹ˆä¸‰ç›¸ç”µè·¯èƒ½å¤Ÿé«˜æ•ˆåœ°ä¼ è¾“ç”µåŠ›ï¼Œå®ƒæ˜¯å¦‚ä½•å®ç°å¹³è¡¡çš„ï¼Ÿ
- éçº¿æ€§ç”µé˜»ç”µè·¯çš„è¡Œä¸ºä¸ºä½•éš¾ä»¥é¢„æµ‹ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åˆ†æå®ƒï¼Ÿ
- åŠ¨æ€ç”µè·¯ä¸­çš„"çŠ¶æ€å˜é‡"æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå®ƒå¦‚ä½•å¸®åŠ©æˆ‘ä»¬æè¿°ç³»ç»Ÿçš„æ¼”åŒ–ï¼Ÿ
- å¤é¢‘åŸŸåˆ†æï¼ˆæ‹‰æ™®æ‹‰æ–¯å˜æ¢ï¼‰ä¸ºä»€ä¹ˆèƒ½è®©æ—¶åŸŸä¸­çš„éš¾é¢˜å˜å¾—æ¸…æ™°æ˜“è§£ï¼Ÿ
- å¦‚ä½•é€šè¿‡ç”µè·¯å®šç†ï¼ˆå¦‚å åŠ å®šç†ã€æˆ´ç»´å—å®šç†ï¼‰å¿«é€Ÿè§£å†³å®é™…å·¥ç¨‹é—®é¢˜ï¼Ÿ
- ä¸ºä»€ä¹ˆéæ­£å¼¦å‘¨æœŸç”µæµä¼šäº§ç”Ÿè°æ³¢ï¼Œå®ƒå¯¹ç”µè·¯æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ
- ç”µè·¯å®éªŒä¸­çš„æµ‹é‡è¯¯å·®ä»ä½•è€Œæ¥ï¼Œå¦‚ä½•é€šè¿‡ç†è®ºåˆ†ææ”¹è¿›å®éªŒç»“æœï¼Ÿ''',
    'enabled': 1
}

# ç”Ÿæˆå¹¶æ‰“å° SQL
if __name__ == '__main__':
    sql = generate_insert_sql(sample_data)
    print(sql) 